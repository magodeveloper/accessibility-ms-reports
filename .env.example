# =============================================================================
# Variables de entorno para Microservicio Reports - PLANTILLA
# =============================================================================
# IMPORTANTE: Este es un archivo de ejemplo. Copie este archivo a:
#   - .env.development (para entorno de desarrollo local)
#   - .env.production (para entorno de producción)
# y ajuste los valores según su entorno específico.
#
# ADVERTENCIA DE SEGURIDAD:
# - NO commitear archivos .env.development o .env.production al repositorio
# - Cambiar TODAS las contraseñas antes de usar en producción
# - Los secretos JWT deben ser únicos y seguros (mínimo 64 caracteres)
# - Usar User Secrets para desarrollo: dotnet user-secrets set "JwtSettings:SecretKey" "<key>"
# - Usar Azure Key Vault para producción
# =============================================================================

# --- ENTORNO ---
# Valores: Development, Staging, Production
ASPNETCORE_ENVIRONMENT=Development

# --- URLS DEL API ---
# URL donde el API escuchará peticiones
ASPNETCORE_URLS=http://+:8083

# --- BASE DE DATOS MYSQL ---
DB_NAME=reportsdb
DB_USER=msuser
DB_PASSWORD=CHANGE_THIS_PASSWORD_IN_PRODUCTION
DB_ROOT_PASSWORD=CHANGE_THIS_ROOT_PASSWORD_IN_PRODUCTION
DB_PORT=3309

# --- PUERTO DEL API ---
# Puerto expuesto en el host para acceder al API
API_HOST_PORT=8083

# --- JWT CONFIGURATION ---
# IMPORTANTE: No exponer estos valores directamente en producción
# Usar User Secrets (desarrollo) o Azure Key Vault (producción)
# Para generar SecretKey: .\Generate-JwtSecretKey.ps1 -Type Special -Length 64

# JWT Secret Key (mínimo 64 caracteres, usar User Secrets en producción)
# JwtSettings__SecretKey=USAR_USER_SECRETS_O_AZURE_KEY_VAULT

# JWT Issuer (quién emite el token)
# Development: AccessibilityReportsAPI
# Production: https://api.yourcompany.com/Reports
JwtSettings__Issuer=AccessibilityReportsAPI

# JWT Audience (para quién es el token)
# Development: AccessibilityClients
# Production: https://yourcompany.com
JwtSettings__Audience=AccessibilityClients

# JWT Token expiration in hours
JwtSettings__ExpiryHours=24

# --- HEALTH CHECKS ---
# Habilitar detalles de errores en health checks
HealthChecks__EnableDetailedErrors=true

# Umbral de memoria en MB (alertar si se excede)
HealthChecks__MemoryThresholdMB=512

# --- MÉTRICAS (PROMETHEUS) ---
# Habilitar recolección de métricas
Metrics__Enabled=true

# Habilitar métricas HTTP automáticas
Metrics__EnableHttpMetrics=true

# --- LOGGING ---
# Niveles: Trace, Debug, Information, Warning, Error, Critical
Logging__LogLevel__Default=Information
Logging__LogLevel__Microsoft.AspNetCore=Warning
Logging__LogLevel__Microsoft.Extensions.Diagnostics.HealthChecks=Information

# --- HOSTS PERMITIDOS ---
# En producción, especificar dominios permitidos: "app.company.com,api.company.com"
AllowedHosts=*

# --- MYSQL OPCIONALES ---
# Configuraciones avanzadas de MySQL (descomentar si es necesario)
# MYSQL_CHARSET=utf8mb4
# MYSQL_COLLATION=utf8mb4_unicode_ci
# ENABLE_SSL=false
# CONNECTION_TIMEOUT=30
# COMMAND_TIMEOUT=300

# =============================================================================
# EJEMPLOS DE CONFIGURACIÓN POR ENTORNO
# =============================================================================

# --- DESARROLLO LOCAL ---
# ASPNETCORE_ENVIRONMENT=Development
# DB_PORT=3309
# API_HOST_PORT=8083

# --- STAGING ---
# ASPNETCORE_ENVIRONMENT=Staging
# DB_PORT=3306
# API_HOST_PORT=8083

# --- PRODUCCIÓN ---
# ASPNETCORE_ENVIRONMENT=Production
# DB_PORT=3306
# API_HOST_PORT=8083
# AllowedHosts=api.yourcompany.com,app.yourcompany.com

# =============================================================================
# NOTAS IMPORTANTES
# =============================================================================
# 1. JWT Configuration debe ser IDÉNTICA en todos los microservicios y Gateway
# 2. Ejecutar .\Validate-JwtConfig.ps1 para verificar consistencia
# 3. El puerto 8083 distingue este microservicio de Users (8081) y Analysis (8082)
# 4. La base de datos reportsdb contiene reportes de accesibilidad e históricos
# =============================================================================
